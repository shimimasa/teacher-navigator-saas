# 実装計画

- [ ] 1. プロジェクト基盤とセットアップ
  - Node.js + Express.js プロジェクト初期化、package.json設定、基本的なフォルダ構造作成
  - MongoDB接続設定とMongoose ODM設定
  - 環境変数管理 (.env) とセキュリティ設定
  - _要件: 6.3, 6.4_

- [ ] 2. 認証システムの実装
- [ ] 2.1 ユーザーモデルとJWT認証の実装
  - User モデル (Mongoose schema) 作成、bcryptでパスワードハッシュ化
  - JWT トークン生成・検証ミドルウェア実装
  - 認証関連のユニットテスト作成
  - _要件: 4.1, 4.4_

- [ ] 2.2 認証API エンドポイントの実装
  - POST /api/auth/register, /login, /reset-password エンドポイント実装
  - 入力値バリデーション (email形式、パスワード強度) 実装
  - 認証APIの統合テスト作成
  - _要件: 4.1, 4.4_

- [ ] 3. 診断システムのコア実装
- [ ] 3.1 診断データモデルと質問管理
  - Diagnosis モデルとTeachingStyle モデル (Mongoose schema) 作成
  - 診断質問データの初期セットアップ (JSON形式)
  - 診断エンジンのロジック実装 (personalityType判定アルゴリズム)
  - _要件: 1.2, 1.3_

- [ ] 3.2 診断API エンドポイントの実装
  - GET /api/diagnosis/questions, POST /api/diagnosis/submit エンドポイント実装
  - 診断結果計算とスコア算出ロジック実装
  - 診断APIのユニットテストと統合テスト作成
  - _要件: 1.1, 1.2, 1.4_

- [ ] 4. 授業スタイル推奨システム
- [ ] 4.1 スタイル推奨エンジンの実装
  - 診断結果に基づくスタイル推奨アルゴリズム実装
  - TeachingStyle データの初期セットアップ
  - 推奨ロジックのユニットテスト作成
  - _要件: 2.1, 2.2, 2.4_

- [ ] 4.2 授業スタイルAPI の実装
  - GET /api/teaching-styles/recommendations/:diagnosisId エンドポイント実装
  - 優先度順スタイル表示機能 (3-5つのスタイル)
  - 教科・学年特化推奨機能実装
  - _要件: 2.2, 2.3, 2.4_

- [ ] 5. テンプレート生成システム
- [ ] 5.1 テンプレートモデルとPDF生成機能
  - Template モデル (Mongoose schema) 作成
  - PDFKit を使用したPDF生成サービス実装
  - テンプレート構造 (授業計画、ワークシート、評価基準) 定義
  - _要件: 3.1, 3.2, 3.4_

- [ ] 5.2 テンプレートAPI とカスタマイズ機能
  - POST /api/templates/generate, PUT /api/templates/:id エンドポイント実装
  - テンプレート編集・カスタマイズ機能実装
  - PDF/Word形式ダウンロード機能実装
  - _要件: 3.2, 3.3, 3.4_

- [ ] 6. フロントエンド基盤構築
- [ ] 6.1 React プロジェクトセットアップ
  - Create React App でプロジェクト初期化
  - React Router, Axios, Material-UI インストール・設定
  - 基本的なコンポーネント構造とページルーティング設定
  - _要件: 全般的なUI要件_

- [ ] 6.2 認証関連コンポーネント実装
  - LoginForm, RegisterForm, PasswordReset コンポーネント実装
  - JWT トークン管理 (localStorage) とAxios interceptor設定
  - 認証状態管理 (Context API) 実装
  - _要件: 4.1, 4.4_

- [ ] 7. 診断フロントエンド実装
- [ ] 7.1 診断ウィザードコンポーネント
  - DiagnosisWizard, QuestionCard コンポーネント実装
  - 段階的質問表示と回答保存機能
  - 進捗保存・再開機能実装
  - _要件: 1.1, 1.4_

- [ ] 7.2 診断結果表示コンポーネント
  - ResultDisplay コンポーネントで視覚的結果表示
  - パーソナリティタイプとスコアのグラフ表示
  - 診断結果の詳細説明表示機能
  - _要件: 1.3_

- [ ] 8. 授業スタイル提案フロントエンド
- [ ] 8.1 スタイル推奨表示コンポーネント
  - StyleRecommendations, StyleCard コンポーネント実装
  - 優先度順スタイル表示 (3-5つ)
  - スタイル詳細表示とナビゲーション機能
  - _要件: 2.2, 2.3_

- [ ] 8.2 スタイル詳細とカスタマイズ
  - StyleDetails コンポーネントで特徴・実践方法表示
  - 教科・学年指定機能とフィルタリング
  - スタイル選択とテンプレート生成への連携
  - _要件: 2.1, 2.4_

- [ ] 9. テンプレート管理フロントエンド
- [ ] 9.1 テンプレート生成・編集コンポーネント
  - TemplateGenerator, TemplateEditor コンポーネント実装
  - リアルタイムプレビュー機能
  - テンプレートカスタマイズUI実装
  - _要件: 3.1, 3.3_

- [ ] 9.2 テンプレートライブラリとダウンロード
  - TemplateLibrary コンポーネントで履歴管理
  - PDF/Word形式ダウンロード機能
  - テンプレート検索・フィルタリング機能
  - _要件: 3.4, 4.2_

- [ ] 10. 分析・レポート機能実装
- [ ] 10.1 分析データ収集とAPI
  - Analytics モデル作成と使用データ記録機能
  - GET /api/analytics/dashboard, /progress エンドポイント実装
  - 診断結果変化追跡とデータ集計ロジック
  - _要件: 5.1, 5.2, 5.3_

- [ ] 10.2 ダッシュボードとレポート表示
  - Dashboard, ProgressChart, ReportViewer コンポーネント実装
  - Chart.js を使用したグラフ表示機能
  - 6ヶ月間活動サマリー表示機能
  - _要件: 5.1, 5.3, 5.4_

- [ ] 11. システム品質とセキュリティ強化
- [ ] 11.1 パフォーマンス最適化
  - MongoDB インデックス設定とクエリ最適化
  - React コンポーネントの最適化 (memo, useMemo)
  - API レスポンス時間測定と3秒以内応答確保
  - _要件: 6.1_

- [ ] 11.2 セキュリティとエラーハンドリング
  - 入力値サニタイゼーションとXSS対策実装
  - エラーハンドリングミドルウェアと統一エラーレスポンス
  - データ暗号化とHTTPS設定
  - _要件: 6.3, 6.4_

- [ ] 12. テストとデプロイ準備
- [ ] 12.1 包括的テスト実装
  - Jest + React Testing Library でフロントエンドテスト
  - Supertest でバックエンドAPI統合テスト
  - 80%以上のテストカバレッジ達成
  - _要件: 全要件のテスト検証_

- [ ] 12.2 本番環境デプロイ設定
  - Docker コンテナ設定とビルドプロセス
  - 環境変数管理と本番環境設定
  - 100人同時アクセス負荷テスト実施
  - _要件: 6.2, 6.4_